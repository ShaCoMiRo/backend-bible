# HTTP란?

1. [HTTP](#http)
2. [HTTP의 동작](#http의-동작)
3. [HTTP의 특징](#http의-특징)
   1. [HTTP의 간단한 예시](#http의-간단한-예시)
4. [요청(Request)](#요청request)
   1. [Request의 간단한 예시](#request의-간단한-예시)
   2. [요청의 종류(Request Method)](#요청의-종류request-method)
   3. [Request HTTP 메시지 예시](#request-http-메시지-예시)
      1. [시작줄(첫 줄)](#시작줄첫-줄)
      2. [헤더(두번째 줄부터)](#헤더두번째-줄부터)
      3. [본문(헤더에서 한 줄 띄고)](#본문헤더에서-한-줄-띄고)
5. [응답(Response)](#응답response)
   1. [Request의 간단한 예시](#request의-간단한-예시)
   2. [요청의 종류(Request Method)](#요청의-종류request-method)
   3. [Response HTTP 메시지 예시](#response-http-메시지-예시)
      1. [시작줄(첫 줄)](#시작줄첫-줄-1)
      2. [헤더(두번째 줄부터)](#헤더두번째-줄부터-1)
      3. [본문(헤더 뒤부터)](#본문헤더-뒤부터)
6. [HTTP 요청 메서드](#http-요청-메서드)
   1. [GET](#get)
   2. [POST](#post)
   3. [PUT](#put)
   4. [DELETE](#delete)
   5. [PATCH](#patch)
7. [참고 자료](#참고-자료)

## HTTP

> HTTP(HyperText Transfer Protocol)은 서버-클라이언트 모델을 따르면서 Request/Response 구조로 웹 상에서 정보를 주고받을 수 있는 프로토콜이다.

HTTP는 웹 상에서 정보를 전송하기 위한 통신 프로토콜로써 HTML과 같은 문서를 전송하는 용도로 사용된다. TCP/IP 기반으로 동작하며, 가장 큰 특징은 **비연결성**(Connectionless)과 **무상태성**(Stateless)이다.

인터넷 상에서는 이렇게 정해진 규약을 바탕으로 모든 프로그램에서 이 규약에 맞춰 통신하기 때문에 호환성 문제 없이 정보를 서로 교환할 수 있게 되었다.

## HTTP의 동작

HTTP는 클라이언트가 브라우저를 통해서 특정 서비스를 URL이나 다른 수단을 통해 HTTP 요청(Request)을 보내면면 서버에서는 해당 요청사항에 맞는 결과를 찾아서 사용자에게 HTTP 응답(Response)하는 형태로 동작한다.

- 요청 : Client → Server
- 응답 : Server → Client

HTTP 통신을 통해 주고받을 수 있는 정보에는 HTML 문서 외에도 다양하다. Plain Text부터 JSON, XML과 같은 형태의 정보도 주고받을 수 있으며, 보통은 클라이언트가 수신하는 정보를 어떤 형태(HTML, JSON 등)로 받고 싶은지를 명시하는 경우가 많다.

## HTTP의 특징

![HTTP-01](./images/HTTP-01.png)

- HTTP 메시지는 HTTP 서버와 HTTP 클라이언트에 의해 해석된다.
- TCP/IP를 이용하는 응용 프로토콜이다.
- HTTP는 연결 상태를 유지하지 않는 무상태성 프로토콜이다.  
  (이 단점을 보완하기 위해 Cookie와 Session이 등장했다.)
- HTTP는 비연결성 프로토콜이기 때문에 요청/응답 방식으로 동작한다.

> **비연결성(Connectionless)이란?**
>
> 클라이언트와 서버가 한 번 연결을 맺은 후, 클라이언트 요청에 대해 서버가 응답을 마치면 맺었던 연결을 끊어버리는 성질을 말한다.
>
> - **비연결성의 장점**
>   - HTTP는 인터넷 상에서 불특정 다수의 통신 환경을 기반으로 설계되었다.  
>     따라서 서버에서 다수의 클라이언트와 연결을 계속 유지해야 한다면, 이에 따른 많은 리소스가 발생하게 되므로 이 리스소 증가를 막기 위해서 비연결적인 특징을 갖는다.
> - **비연결성의 단점**
>   - 서버는 클라이언트를 기억하고 있지 않으므로 동일한 클라이언트의 모든 요청에 대해 매번 새로운 연결을 시도/해제하는 과정을 거쳐야 하므로 이에 대한 오버헤드가 발생한다.

> **무상태성(Stateless)란?**
>
> 말그대로 상태를 보존하지 않는 것을 의미한다. 이전 상황(문맥)을 전혀 고려하지 않고, 오직 지금 당장의 상태만 고려하므로, 한번에 필요한 모든 대화를 수행해야 한다.
>
> - **무상태성의 장점**
>   - 유상태성의 경우엔 상태를 유지해야 하므로 언제나 같은 서버가 유지되어야 한다. 하지만 무상태성은 상태를 보관하지 않으므로, 클라이언트의 요청에 어느 서버가 응답해도 상관 없다. 따라서 클라이언트의 요청이 대폭 증가해도 서버를 증설하여 해결할 수 있다.
> - **무상태성의 단점**
>   - 사용자의 상태를 유지시키지 못하면 로그인과 같은 인증 과정을 매번 거쳐야 하므로 번거로워진다. 이를 해결하기 위해 쿠키(Cookie), 세션(Session) 등을 사용한다.

### HTTP의 간단한 예시

- **서버** : 특정 자료에 대한 접근을 관리하는 네트워크 상의 시스템으로, **요청에 대한 응답을 보내준다.**
- **클라이언트** : 특정 자료에 접근할 수 있는 프로그램으로, 대표적으로 웹 브라우저가 있다.

클라이언트 프로그램에서 사용자가 회원가입을 시도할 경우, 서버로 회원정보가 전달되고 서버는 회원정보를 저장하기도 한다. 이 과정에서 **클라이언트와 서버 간의 교류가 HTTP라는 규약을 통해 이뤄진다.**

## 요청(Request)

> **클라이언트가 서버에게 연락하는 것**을 요청이라고 하며, 요청을 보낼 때는 요청에 대한 정보를 담아 함께 서버로 보낸다.

### Request의 간단한 예시

서버가 주문서를 받아 클라이언트가 무엇을 원하는지 파악할 수 있게 된다. 이처럼 **요청은 식당에서 주문서를 작성하는 것과 같다**고 생각하면 된다.

### 요청의 종류(Request Method)

- **GET** : 자료를 **요청**할 때 사용
- **POST** : 자료의 **생성**을 요청할 때 사용
- **PUT** : 자료의 **수정**을 요청할 때 사용
- **DELETE** : 자료의 **삭제**를 요청할 때 사용

### Request HTTP 메시지 예시

```http
GET https://www.google.com HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...
Upgrade-Insecure-Requests: 1
```

요청 메시지는 다음과 같이 구성되어 있다.

- 시작줄(Start Line)
  - 메서드(Method), 주소(Path), HTTP 버전(HTTP Version)
- 헤더(Headers)
- 본문(Body)

#### 시작줄(첫 줄)

첫 줄은 시작줄로 **메서드, 주소, HTTP 버전**으로 구성된다.

- GET : HTTP Method
- https://www.google.com : 사이트 주소
- HTTP/1.1 : HTTP 버전

#### 헤더(두번째 줄부터)

두번째 줄부터는 헤더이며, **요청에 대한 정보**를 담고 있다. `User-Agent`, `Upgrade-Insecure-Request` 등이 헤더에 해당되며 헤더의 종류는 매우 다양하다.

#### 본문(헤더에서 한 줄 띄고)

본문은 **요청을 할 때 함께 보낼 데이터를 담는 부분**이다. [상술한 예시](#request-http-메시지-예시)에서는 단순히 주소로만 요청을 보내고 있고, 별도의 데이터를 담아 보내지 않기 때문에 본문이 비어 있다.

## 응답(Response)

> **서버가 요청에 대한 답변을 클라이언트에게 보내는 것**을 응답이라고 한다.

### 상태 코드(Status Code)

HTTP 상태 코드(HTTP Status Code)는 클라이언트가 보낸 **HTTP 요청에 대한 서버의 응답 코드**로, 상태 코드를 통해 요청의 성공/실패 여부를 판단할 수 있다. 100번대부터 500번대까지 총 5개의 클래스로 구분되어 HTTP 요청에 대한 상태를 알려준다.

- **`1..`(조건부 응답)** : 요청을 받았으며 작업을 계속 진행한다.
- **`2..`(성공)** : 클라이언트가 요청한 동작을 수신, 이해, 승낙했으며 성공적으로 처리했음을 나타낸다.
- **`3..`(리다이렉션 완료)** : 클라이언트가 요청을 마치기 위해 추가 작업이 필요함을 나타낸다.
- **`4..`(요청 오류)** : 클라이언트의 요청 문법이 잘못되었거나 요청 처리가 불가능함을 나타낸다.
- **`5..`(서버 오류)** : 서버가 유효한 요청을 명백하지 수행하지 못했음을 나타낸다.

자주 사용되는 상태 코드들은 다음과 같다.

| 상태 코드(Status Code) | 메시지(Message) | 설명                                                                                                                                  |
| :--------------------: | --------------- | ------------------------------------------------------------------------------------------------------------------------------------- |
|         `200`          | `OK`            | <ul><li>요청이 성공함.<ul><li>잔액조회 성공 등</li></ul></li></ul>                                                                    |
|         `201`          | `Created`       | <ul><li>리소스 생성 성공.<ul><li>게시글 작성 성공, 회원가입 성공 등</li></ul></li></ul>                                               |
|         `400`          | `Bad Request`   | <ul><li>데이터의 형식이 올바르지 않는 등 서버가 요청을 이해할 수 없음.<ul><li>올바르지 않은 형식의 데이터 입력 등</li></ul></li></ul> |
|         `401`          | `Unauthorized`  | <ul><li>인증되지 않은 상태에서 인증이 필요한 리소스에 접근함.<ul><li>로그인 전에 사용자 정보 요청 등</li></ul></li></ul>              |
|         `403`          | `Forbidden`     | <ul><li>인증된 상태에서 권한이 없는 리소스에 접근함.<ul><li>일반 유저가 관리자 메뉴 접근 등</li></ul></li></ul>                       |
|         `404`          | `Not Found`     | <ul><li>요청한 Route가 없음. 찾는 리소스가 없음.<ul><li>`www.naver.com/nossi` 등 존재하지 않는 Route에 요청 등</li></ul></li></ul>    |
|         `500`          | `Bad Gateway`   | <ul><li>서버에서 예상하지 못한 에러가 발생함.<ul><li>예외처리를 하지 않은 오류 발생 등</li></ul></li></ul>                            |

### Response HTTP 메시지 예시

```http
HTTP/1.1 200 OK
Connection: keep-alive
Content-Encoding: gzip
Contnet-Length: 35653
Content-Type: text/html;

<!DOCTYPE html>
  <html lang="ko" data-reactroot="">
    <head>
      <title>
        ...
```

응답 메시지는 다음과 같이 구성되어 있다.

- 시작줄(Start Line)
  - HTTP 버전(HTTP Version), 상태 코드(Status Code), 상태 메시지(Status Message)
- 헤더(Headers)
- 본문(Body)

#### 시작줄(첫 줄)

첫 줄은 **버전 상태 코드 상태메시지**로 구성되어 있다. `200`은 성공적인 요청이었다는 의미다.

#### 헤더(두번째 줄부터)

두번째 줄부터는 헤더로 **응답에 대한 정보를 담고 있다.**

#### 본문(헤더 뒤부터)

응답에는 대부분의 경우 본문이 있다. 보통 데이터를 요청하고 응답 메시지에는 **요청한 데이터를 담아서 보내주기 때문이다. 응답 메시지에 HTML이 담겨 있는데 이 HTML을 받아 브라우저가 화면에 렌더링한다.**

## HTTP 요청 메서드

주요 HTTP 요청 메서드는 크게 `GET`, `POST`, `PUT`, `DELETE`, `PATCH`가 있으며, 이 외에도 다양한 메서드들이 존재한다.

### GET

- 리소스 조회에 사용한다.
- 클라이언트가 서버에게 **정보를 요청**할 때 사용하는 메서드이다.
- URL 주소 끝에 key-value 쌍으로 **매개변수(Parameter)를 포함하여 전송**하는데, 이 부분을 쿼리 문자열(**Query String**)이라고 부른다.
  - 쿼리 문자열은 `https://www.google.com/search?q=GET`과 같이 `?` 문자 이후에 붙는다. 전송할 매개변수가 여럿일 경우 `&`로 구분한다.
  - URL에 이어붙일 수 있는 매개변수의 길이 제한이 있어 **대용량 데이터 전송에는 부적합**하다.
  - 매개변수에 담은 요청 정보를 사용자가 쉽게 눈으로 확인할 수 있어 **보안에 취약**하다.
- **캐시(Cache)가 가능**하여 브라우저가 요청 결과를 히스토리에 저장해둔 후 동일 요청시 저장된 값에서 가져올 수 있다.
- HTTP 패킷의 본문(Body)는 빈 상태로 전송한다.

### POST

- 요청 데이터 처리에 사용한다.(주로 생성)
- 클라이언트가 본문(Body)를 통해 전달한 데이터를 서버가 처리하도록 요청하는 메서드이다.
  - 요청 정보를 본문 안에 담아서 전송하기에 대용량 데이터 전송에 적합하다.
  - 본문 안에 정보를 담아두기에 `GET` 메서드에 비해 비교적 안전하다.
- 리소스 등록 외에 데이터 생성 및 변경에도 쓰이며 특정 프로세스를 처리하는 용도로도 사용된다.

### PUT

- 모든 리소스를 수정 및 대체하는 데 사용하며, 해당 리소스가 없다면 새로 생성한다.

### DELETE

- 특정 리소스를 제거할 때 사용한다.

### PATCH

- 리소스의 일부분만 수정할 때 사용한다.

## 참고 자료

- [HTTP란 무엇인가?](https://velog.io/@surim014/HTTP%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)
- [HTTP 상태 코드 정리](https://brunch.co.kr/@leedongins/65)
- [HTTP란?](https://velog.io/@lkdfj6/HTTP%EB%9E%80)
